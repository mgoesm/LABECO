---
title: "Matheus Goes"
format: html
editor: visual
---

```{r}
#| label: load-packages
#| include: false

library(GetBCBData)
library(dplyr)
library(ggplot2)
library(gganimate)
```

## VARIÁVEL

Neste trabalho escolhemos analisar a variável **Reservas Internacionais do Brasil**.\
Essa variável representa os ativos internacionais mantidos pelo Banco Central, medidos em US\$ milhões.\
A fonte dos dados é o Banco Central do Brasil, código 13621.\
Os dados foram convertidos para **US\$ bilhões** para facilitar a visualização.

## GRÁFICO DE DADOS (ANIMAÇÃO)

O gráfico abaixo mostra a evolução histórica das reservas internacionais do Brasil desde o ano 2000.\
A animação destaca como as reservas foram crescendo ao longo do tempo, especialmente entre 2006 e 2014, e os ajustes após 2015.

```{r}
#| label: graficoanimado
#| warning: false
#| message: false
#| echo: false

# Buscar dados
my.id <- c(reservas = 13621)

df.bcb <- gbcbd_get_series(
  id = my.id,
  first.date = '2000-01-01',
  last.date = Sys.Date(),
  format.data = 'long',
  use.memoise = TRUE,
  cache.path = tempdir(),
  do.parallel = FALSE
)

# Preparar dados em bilhões
df.bcb <- df.bcb %>%
  select(ref.date, value) %>%
  mutate(value_bilhoes = value / 1000) %>%
  arrange(ref.date)

# Criar gráfico animado
anim <- ggplot(df.bcb, aes(x = ref.date, y = value_bilhoes)) +
  geom_line(color = "#FFD700", size = 1.5) +  # dourado suave
  labs(title = "Reservas Internacionais do Brasil",
       subtitle = 'Ano: {frame_time}',
       x = 'Ano', y = 'US$ bilhões') +
  theme_minimal(base_family = "Helvetica") +
  theme(
    plot.background = element_rect(fill = "black", color = NA),
    panel.background = element_rect(fill = "black", color = NA),
    plot.title = element_text(face = "bold", size = 18, color = "white"),
    plot.subtitle = element_text(size = 14, color = "white", margin = margin(b = 10)),
    axis.title = element_text(color = "white"),
    axis.text = element_text(color = "white"),
    legend.position = "none"
  ) +
  transition_reveal(ref.date)

anim
```
